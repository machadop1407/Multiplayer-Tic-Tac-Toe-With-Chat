{"ast":null,"code":"var __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n};\n\nimport deepequal from 'react-fast-compare';\n/**\n * Following function validates a function which returns notification message.\n * It validates if the first parameter is function and also if return value of function is string or no.\n */\n\nexport var validateAndGetMessage = function (func, args) {\n  if (!func || typeof func !== 'function') return null; // below is due to tests passing a single argument\n  // rather than an array.\n\n  if (!(args instanceof Array)) {\n    // @ts-expect-error\n    args = [args];\n  }\n\n  var returnValue = func.apply(void 0, args);\n  if (typeof returnValue !== 'string') return null;\n  return returnValue;\n};\n/**\n * Tell if the owner of the current message is muted\n */\n\nexport var isUserMuted = function (message, mutes) {\n  if (!mutes || !message) return false;\n  var userMuted = mutes.filter(function (el) {\n    var _a;\n\n    return el.target.id === ((_a = message.user) === null || _a === void 0 ? void 0 : _a.id);\n  });\n  return !!userMuted.length;\n};\nexport var MESSAGE_ACTIONS = {\n  delete: 'delete',\n  edit: 'edit',\n  flag: 'flag',\n  mute: 'mute',\n  pin: 'pin',\n  quote: 'quote',\n  react: 'react',\n  reply: 'reply'\n}; // @deprecated in favor of `channelCapabilities` - TODO: remove in next major release\n\nexport var defaultPinPermissions = {\n  commerce: {\n    admin: true,\n    anonymous: false,\n    channel_member: false,\n    channel_moderator: true,\n    guest: false,\n    member: false,\n    moderator: true,\n    owner: true,\n    user: false\n  },\n  gaming: {\n    admin: true,\n    anonymous: false,\n    channel_member: false,\n    channel_moderator: true,\n    guest: false,\n    member: false,\n    moderator: true,\n    owner: false,\n    user: false\n  },\n  livestream: {\n    admin: true,\n    anonymous: false,\n    channel_member: false,\n    channel_moderator: true,\n    guest: false,\n    member: false,\n    moderator: true,\n    owner: true,\n    user: false\n  },\n  messaging: {\n    admin: true,\n    anonymous: false,\n    channel_member: true,\n    channel_moderator: true,\n    guest: false,\n    member: true,\n    moderator: true,\n    owner: true,\n    user: false\n  },\n  team: {\n    admin: true,\n    anonymous: false,\n    channel_member: true,\n    channel_moderator: true,\n    guest: false,\n    member: true,\n    moderator: true,\n    owner: true,\n    user: false\n  }\n};\nexport var getMessageActions = function (actions, _a) {\n  var canDelete = _a.canDelete,\n      canEdit = _a.canEdit,\n      canFlag = _a.canFlag,\n      canMute = _a.canMute,\n      canPin = _a.canPin,\n      canQuote = _a.canQuote,\n      canReact = _a.canReact,\n      canReply = _a.canReply;\n  var messageActionsAfterPermission = [];\n  var messageActions = [];\n\n  if (actions && typeof actions === 'boolean') {\n    // If value of actions is true, then populate all the possible values\n    messageActions = Object.keys(MESSAGE_ACTIONS);\n  } else if (actions && actions.length > 0) {\n    messageActions = __spreadArray([], actions);\n  } else {\n    return [];\n  }\n\n  if (canDelete && messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.delete);\n  }\n\n  if (canEdit && messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.edit);\n  }\n\n  if (canFlag && messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.flag);\n  }\n\n  if (canMute && messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.mute);\n  }\n\n  if (canPin && messageActions.indexOf(MESSAGE_ACTIONS.pin) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.pin);\n  }\n\n  if (canQuote && messageActions.indexOf(MESSAGE_ACTIONS.quote) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.quote);\n  }\n\n  if (canReact && messageActions.indexOf(MESSAGE_ACTIONS.react) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.react);\n  }\n\n  if (canReply && messageActions.indexOf(MESSAGE_ACTIONS.reply) > -1) {\n    messageActionsAfterPermission.push(MESSAGE_ACTIONS.reply);\n  }\n\n  return messageActionsAfterPermission;\n};\nexport var showMessageActionsBox = function (actions) {\n  if (actions.length === 0) {\n    return false;\n  }\n\n  if (actions.length === 1 && (actions.includes('react') || actions.includes('reply'))) {\n    return false;\n  }\n\n  if (actions.length === 2 && actions.includes('react') && actions.includes('reply')) {\n    return false;\n  }\n\n  return true;\n};\nexport var areMessagePropsEqual = function (prevProps, nextProps) {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n\n  var prevMessage = prevProps.message,\n      prevMessageUI = prevProps.Message;\n  var nextMessage = nextProps.message,\n      nextMessageUI = nextProps.Message;\n  if (prevMessageUI !== nextMessageUI) return false;\n  if (prevProps.endOfGroup !== nextProps.endOfGroup) return false;\n\n  if (nextProps.showDetailedReactions !== prevProps.showDetailedReactions) {\n    return false;\n  }\n\n  var messagesAreEqual = prevMessage.deleted_at === nextMessage.deleted_at && ((_a = prevMessage.latest_reactions) === null || _a === void 0 ? void 0 : _a.length) === ((_b = nextMessage.latest_reactions) === null || _b === void 0 ? void 0 : _b.length) && ((_c = prevMessage.own_reactions) === null || _c === void 0 ? void 0 : _c.length) === ((_d = nextMessage.own_reactions) === null || _d === void 0 ? void 0 : _d.length) && prevMessage.pinned === nextMessage.pinned && prevMessage.reply_count === nextMessage.reply_count && prevMessage.status === nextMessage.status && prevMessage.text === nextMessage.text && prevMessage.type === nextMessage.type && prevMessage.updated_at === nextMessage.updated_at && ((_e = prevMessage.user) === null || _e === void 0 ? void 0 : _e.image) === ((_f = nextMessage.user) === null || _f === void 0 ? void 0 : _f.image) && ((_g = prevMessage.user) === null || _g === void 0 ? void 0 : _g.name) === ((_h = nextMessage.user) === null || _h === void 0 ? void 0 : _h.name);\n  if (!messagesAreEqual) return false;\n  var deepEqualProps = deepequal(nextProps.readBy, prevProps.readBy) && deepequal(nextProps.groupStyles, prevProps.groupStyles) && // last 3 messages can have different group styles\n  deepequal(nextProps.mutes, prevProps.mutes) && deepequal(nextProps.lastReceivedId, prevProps.lastReceivedId);\n  if (!deepEqualProps) return false;\n  return prevProps.messageListRect === nextProps.messageListRect // MessageList wrapper layout changes\n  ;\n};\nexport var areMessageUIPropsEqual = function (prevProps, nextProps) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n\n  var prevLastReceivedId = prevProps.lastReceivedId,\n      prevMessage = prevProps.message;\n  var nextLastReceivedId = nextProps.lastReceivedId,\n      nextMessage = nextProps.message;\n  if (prevProps.editing !== nextProps.editing) return false;\n  if (prevProps.endOfGroup !== nextProps.endOfGroup) return false;\n  if (((_a = prevProps.mutes) === null || _a === void 0 ? void 0 : _a.length) !== ((_b = nextProps.mutes) === null || _b === void 0 ? void 0 : _b.length)) return false;\n  if (((_c = prevProps.readBy) === null || _c === void 0 ? void 0 : _c.length) !== ((_d = nextProps.readBy) === null || _d === void 0 ? void 0 : _d.length)) return false;\n\n  if (prevProps.showDetailedReactions !== nextProps.showDetailedReactions) {\n    return false;\n  }\n\n  if ((prevMessage.id === prevLastReceivedId || prevMessage.id === nextLastReceivedId) && prevLastReceivedId !== nextLastReceivedId) {\n    return false;\n  }\n\n  var messagesAreEqual = prevMessage.deleted_at === nextMessage.deleted_at && ((_e = prevMessage.latest_reactions) === null || _e === void 0 ? void 0 : _e.length) === ((_f = nextMessage.latest_reactions) === null || _f === void 0 ? void 0 : _f.length) && ((_g = prevMessage.own_reactions) === null || _g === void 0 ? void 0 : _g.length) === ((_h = nextMessage.own_reactions) === null || _h === void 0 ? void 0 : _h.length) && prevMessage.pinned === nextMessage.pinned && prevMessage.reply_count === nextMessage.reply_count && prevMessage.status === nextMessage.status && prevMessage.text === nextMessage.text && prevMessage.type === nextMessage.type && prevMessage.updated_at === nextMessage.updated_at && ((_j = prevMessage.user) === null || _j === void 0 ? void 0 : _j.image) === ((_k = nextMessage.user) === null || _k === void 0 ? void 0 : _k.image) && ((_l = prevMessage.user) === null || _l === void 0 ? void 0 : _l.name) === ((_m = nextMessage.user) === null || _m === void 0 ? void 0 : _m.name);\n  if (!messagesAreEqual) return false;\n  return true;\n};\nexport var messageHasReactions = function (message) {\n  return !!(message === null || message === void 0 ? void 0 : message.latest_reactions) && !!message.latest_reactions.length;\n};\nexport var messageHasAttachments = function (message) {\n  return !!(message === null || message === void 0 ? void 0 : message.attachments) && !!message.attachments.length;\n};\nexport var getImages = function (message) {\n  if (!(message === null || message === void 0 ? void 0 : message.attachments)) {\n    return [];\n  }\n\n  return message.attachments.filter(function (item) {\n    return item.type === 'image';\n  });\n};\nexport var getNonImageAttachments = function (message) {\n  if (!(message === null || message === void 0 ? void 0 : message.attachments)) {\n    return [];\n  }\n\n  return message.attachments.filter(function (item) {\n    return item.type !== 'image';\n  });\n};\nexport var getReadByTooltipText = function (users, t, client) {\n  var outStr = '';\n\n  if (!t) {\n    throw new Error('`getReadByTooltipText was called, but translation function is not available`');\n  } // first filter out client user, so restLength won't count it\n\n\n  var otherUsers = users.filter(function (item) {\n    return item && (client === null || client === void 0 ? void 0 : client.user) && item.id !== client.user.id;\n  }).map(function (item) {\n    return item.name || item.id;\n  });\n  var slicedArr = otherUsers.slice(0, 5);\n  var restLength = otherUsers.length - slicedArr.length;\n\n  if (slicedArr.length === 1) {\n    outStr = slicedArr[0] + \" \";\n  } else if (slicedArr.length === 2) {\n    // joins all with \"and\" but =no commas\n    // example: \"bob and sam\"\n    outStr = t('{{ firstUser }} and {{ secondUser }}', {\n      firstUser: slicedArr[0],\n      secondUser: slicedArr[1]\n    });\n  } else if (slicedArr.length > 2) {\n    // joins all with commas, but last one gets \", and\" (oxford comma!)\n    // example: \"bob, joe, sam and 4 more\"\n    if (restLength === 0) {\n      // mutate slicedArr to remove last user to display it separately\n      var lastUser = slicedArr.splice(slicedArr.length - 2, 1);\n      outStr = t('{{ commaSeparatedUsers }}, and {{ lastUser }}', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        lastUser: lastUser\n      });\n    } else {\n      outStr = t('{{ commaSeparatedUsers }} and {{ moreCount }} more', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        moreCount: restLength\n      });\n    }\n  }\n\n  return outStr;\n};","map":{"version":3,"sources":["/Users/pedrohenriquemachado/Documents/Projects/multi-tic-tac-toe/client/node_modules/stream-chat-react/dist/components/Message/utils.js"],"names":["__spreadArray","to","from","i","il","length","j","deepequal","validateAndGetMessage","func","args","Array","returnValue","apply","isUserMuted","message","mutes","userMuted","filter","el","_a","target","id","user","MESSAGE_ACTIONS","delete","edit","flag","mute","pin","quote","react","reply","defaultPinPermissions","commerce","admin","anonymous","channel_member","channel_moderator","guest","member","moderator","owner","gaming","livestream","messaging","team","getMessageActions","actions","canDelete","canEdit","canFlag","canMute","canPin","canQuote","canReact","canReply","messageActionsAfterPermission","messageActions","Object","keys","indexOf","push","showMessageActionsBox","includes","areMessagePropsEqual","prevProps","nextProps","_b","_c","_d","_e","_f","_g","_h","prevMessage","prevMessageUI","Message","nextMessage","nextMessageUI","endOfGroup","showDetailedReactions","messagesAreEqual","deleted_at","latest_reactions","own_reactions","pinned","reply_count","status","text","type","updated_at","image","name","deepEqualProps","readBy","groupStyles","lastReceivedId","messageListRect","areMessageUIPropsEqual","_j","_k","_l","_m","prevLastReceivedId","nextLastReceivedId","editing","messageHasReactions","messageHasAttachments","attachments","getImages","item","getNonImageAttachments","getReadByTooltipText","users","t","client","outStr","Error","otherUsers","map","slicedArr","slice","restLength","firstUser","secondUser","lastUser","splice","commaSeparatedUsers","join","moreCount"],"mappings":"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","sourcesContent":["var __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nimport deepequal from 'react-fast-compare';\n/**\n * Following function validates a function which returns notification message.\n * It validates if the first parameter is function and also if return value of function is string or no.\n */\nexport var validateAndGetMessage = function (func, args) {\n    if (!func || typeof func !== 'function')\n        return null;\n    // below is due to tests passing a single argument\n    // rather than an array.\n    if (!(args instanceof Array)) {\n        // @ts-expect-error\n        args = [args];\n    }\n    var returnValue = func.apply(void 0, args);\n    if (typeof returnValue !== 'string')\n        return null;\n    return returnValue;\n};\n/**\n * Tell if the owner of the current message is muted\n */\nexport var isUserMuted = function (message, mutes) {\n    if (!mutes || !message)\n        return false;\n    var userMuted = mutes.filter(function (el) { var _a; return el.target.id === ((_a = message.user) === null || _a === void 0 ? void 0 : _a.id); });\n    return !!userMuted.length;\n};\nexport var MESSAGE_ACTIONS = {\n    delete: 'delete',\n    edit: 'edit',\n    flag: 'flag',\n    mute: 'mute',\n    pin: 'pin',\n    quote: 'quote',\n    react: 'react',\n    reply: 'reply',\n};\n// @deprecated in favor of `channelCapabilities` - TODO: remove in next major release\nexport var defaultPinPermissions = {\n    commerce: {\n        admin: true,\n        anonymous: false,\n        channel_member: false,\n        channel_moderator: true,\n        guest: false,\n        member: false,\n        moderator: true,\n        owner: true,\n        user: false,\n    },\n    gaming: {\n        admin: true,\n        anonymous: false,\n        channel_member: false,\n        channel_moderator: true,\n        guest: false,\n        member: false,\n        moderator: true,\n        owner: false,\n        user: false,\n    },\n    livestream: {\n        admin: true,\n        anonymous: false,\n        channel_member: false,\n        channel_moderator: true,\n        guest: false,\n        member: false,\n        moderator: true,\n        owner: true,\n        user: false,\n    },\n    messaging: {\n        admin: true,\n        anonymous: false,\n        channel_member: true,\n        channel_moderator: true,\n        guest: false,\n        member: true,\n        moderator: true,\n        owner: true,\n        user: false,\n    },\n    team: {\n        admin: true,\n        anonymous: false,\n        channel_member: true,\n        channel_moderator: true,\n        guest: false,\n        member: true,\n        moderator: true,\n        owner: true,\n        user: false,\n    },\n};\nexport var getMessageActions = function (actions, _a) {\n    var canDelete = _a.canDelete, canEdit = _a.canEdit, canFlag = _a.canFlag, canMute = _a.canMute, canPin = _a.canPin, canQuote = _a.canQuote, canReact = _a.canReact, canReply = _a.canReply;\n    var messageActionsAfterPermission = [];\n    var messageActions = [];\n    if (actions && typeof actions === 'boolean') {\n        // If value of actions is true, then populate all the possible values\n        messageActions = Object.keys(MESSAGE_ACTIONS);\n    }\n    else if (actions && actions.length > 0) {\n        messageActions = __spreadArray([], actions);\n    }\n    else {\n        return [];\n    }\n    if (canDelete && messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1) {\n        messageActionsAfterPermission.push(MESSAGE_ACTIONS.delete);\n    }\n    if (canEdit && messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1) {\n        messageActionsAfterPermission.push(MESSAGE_ACTIONS.edit);\n    }\n    if (canFlag && messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1) {\n        messageActionsAfterPermission.push(MESSAGE_ACTIONS.flag);\n    }\n    if (canMute && messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1) {\n        messageActionsAfterPermission.push(MESSAGE_ACTIONS.mute);\n    }\n    if (canPin && messageActions.indexOf(MESSAGE_ACTIONS.pin) > -1) {\n        messageActionsAfterPermission.push(MESSAGE_ACTIONS.pin);\n    }\n    if (canQuote && messageActions.indexOf(MESSAGE_ACTIONS.quote) > -1) {\n        messageActionsAfterPermission.push(MESSAGE_ACTIONS.quote);\n    }\n    if (canReact && messageActions.indexOf(MESSAGE_ACTIONS.react) > -1) {\n        messageActionsAfterPermission.push(MESSAGE_ACTIONS.react);\n    }\n    if (canReply && messageActions.indexOf(MESSAGE_ACTIONS.reply) > -1) {\n        messageActionsAfterPermission.push(MESSAGE_ACTIONS.reply);\n    }\n    return messageActionsAfterPermission;\n};\nexport var showMessageActionsBox = function (actions) {\n    if (actions.length === 0) {\n        return false;\n    }\n    if (actions.length === 1 && (actions.includes('react') || actions.includes('reply'))) {\n        return false;\n    }\n    if (actions.length === 2 && actions.includes('react') && actions.includes('reply')) {\n        return false;\n    }\n    return true;\n};\nexport var areMessagePropsEqual = function (prevProps, nextProps) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    var prevMessage = prevProps.message, prevMessageUI = prevProps.Message;\n    var nextMessage = nextProps.message, nextMessageUI = nextProps.Message;\n    if (prevMessageUI !== nextMessageUI)\n        return false;\n    if (prevProps.endOfGroup !== nextProps.endOfGroup)\n        return false;\n    if (nextProps.showDetailedReactions !== prevProps.showDetailedReactions) {\n        return false;\n    }\n    var messagesAreEqual = prevMessage.deleted_at === nextMessage.deleted_at &&\n        ((_a = prevMessage.latest_reactions) === null || _a === void 0 ? void 0 : _a.length) === ((_b = nextMessage.latest_reactions) === null || _b === void 0 ? void 0 : _b.length) &&\n        ((_c = prevMessage.own_reactions) === null || _c === void 0 ? void 0 : _c.length) === ((_d = nextMessage.own_reactions) === null || _d === void 0 ? void 0 : _d.length) &&\n        prevMessage.pinned === nextMessage.pinned &&\n        prevMessage.reply_count === nextMessage.reply_count &&\n        prevMessage.status === nextMessage.status &&\n        prevMessage.text === nextMessage.text &&\n        prevMessage.type === nextMessage.type &&\n        prevMessage.updated_at === nextMessage.updated_at &&\n        ((_e = prevMessage.user) === null || _e === void 0 ? void 0 : _e.image) === ((_f = nextMessage.user) === null || _f === void 0 ? void 0 : _f.image) &&\n        ((_g = prevMessage.user) === null || _g === void 0 ? void 0 : _g.name) === ((_h = nextMessage.user) === null || _h === void 0 ? void 0 : _h.name);\n    if (!messagesAreEqual)\n        return false;\n    var deepEqualProps = deepequal(nextProps.readBy, prevProps.readBy) &&\n        deepequal(nextProps.groupStyles, prevProps.groupStyles) && // last 3 messages can have different group styles\n        deepequal(nextProps.mutes, prevProps.mutes) &&\n        deepequal(nextProps.lastReceivedId, prevProps.lastReceivedId);\n    if (!deepEqualProps)\n        return false;\n    return (prevProps.messageListRect === nextProps.messageListRect // MessageList wrapper layout changes\n    );\n};\nexport var areMessageUIPropsEqual = function (prevProps, nextProps) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n    var prevLastReceivedId = prevProps.lastReceivedId, prevMessage = prevProps.message;\n    var nextLastReceivedId = nextProps.lastReceivedId, nextMessage = nextProps.message;\n    if (prevProps.editing !== nextProps.editing)\n        return false;\n    if (prevProps.endOfGroup !== nextProps.endOfGroup)\n        return false;\n    if (((_a = prevProps.mutes) === null || _a === void 0 ? void 0 : _a.length) !== ((_b = nextProps.mutes) === null || _b === void 0 ? void 0 : _b.length))\n        return false;\n    if (((_c = prevProps.readBy) === null || _c === void 0 ? void 0 : _c.length) !== ((_d = nextProps.readBy) === null || _d === void 0 ? void 0 : _d.length))\n        return false;\n    if (prevProps.showDetailedReactions !== nextProps.showDetailedReactions) {\n        return false;\n    }\n    if ((prevMessage.id === prevLastReceivedId || prevMessage.id === nextLastReceivedId) &&\n        prevLastReceivedId !== nextLastReceivedId) {\n        return false;\n    }\n    var messagesAreEqual = prevMessage.deleted_at === nextMessage.deleted_at &&\n        ((_e = prevMessage.latest_reactions) === null || _e === void 0 ? void 0 : _e.length) === ((_f = nextMessage.latest_reactions) === null || _f === void 0 ? void 0 : _f.length) &&\n        ((_g = prevMessage.own_reactions) === null || _g === void 0 ? void 0 : _g.length) === ((_h = nextMessage.own_reactions) === null || _h === void 0 ? void 0 : _h.length) &&\n        prevMessage.pinned === nextMessage.pinned &&\n        prevMessage.reply_count === nextMessage.reply_count &&\n        prevMessage.status === nextMessage.status &&\n        prevMessage.text === nextMessage.text &&\n        prevMessage.type === nextMessage.type &&\n        prevMessage.updated_at === nextMessage.updated_at &&\n        ((_j = prevMessage.user) === null || _j === void 0 ? void 0 : _j.image) === ((_k = nextMessage.user) === null || _k === void 0 ? void 0 : _k.image) &&\n        ((_l = prevMessage.user) === null || _l === void 0 ? void 0 : _l.name) === ((_m = nextMessage.user) === null || _m === void 0 ? void 0 : _m.name);\n    if (!messagesAreEqual)\n        return false;\n    return true;\n};\nexport var messageHasReactions = function (message) { return !!(message === null || message === void 0 ? void 0 : message.latest_reactions) && !!message.latest_reactions.length; };\nexport var messageHasAttachments = function (message) { return !!(message === null || message === void 0 ? void 0 : message.attachments) && !!message.attachments.length; };\nexport var getImages = function (message) {\n    if (!(message === null || message === void 0 ? void 0 : message.attachments)) {\n        return [];\n    }\n    return message.attachments.filter(function (item) { return item.type === 'image'; });\n};\nexport var getNonImageAttachments = function (message) {\n    if (!(message === null || message === void 0 ? void 0 : message.attachments)) {\n        return [];\n    }\n    return message.attachments.filter(function (item) { return item.type !== 'image'; });\n};\nexport var getReadByTooltipText = function (users, t, client) {\n    var outStr = '';\n    if (!t) {\n        throw new Error('`getReadByTooltipText was called, but translation function is not available`');\n    }\n    // first filter out client user, so restLength won't count it\n    var otherUsers = users\n        .filter(function (item) { return item && (client === null || client === void 0 ? void 0 : client.user) && item.id !== client.user.id; })\n        .map(function (item) { return item.name || item.id; });\n    var slicedArr = otherUsers.slice(0, 5);\n    var restLength = otherUsers.length - slicedArr.length;\n    if (slicedArr.length === 1) {\n        outStr = slicedArr[0] + \" \";\n    }\n    else if (slicedArr.length === 2) {\n        // joins all with \"and\" but =no commas\n        // example: \"bob and sam\"\n        outStr = t('{{ firstUser }} and {{ secondUser }}', {\n            firstUser: slicedArr[0],\n            secondUser: slicedArr[1],\n        });\n    }\n    else if (slicedArr.length > 2) {\n        // joins all with commas, but last one gets \", and\" (oxford comma!)\n        // example: \"bob, joe, sam and 4 more\"\n        if (restLength === 0) {\n            // mutate slicedArr to remove last user to display it separately\n            var lastUser = slicedArr.splice(slicedArr.length - 2, 1);\n            outStr = t('{{ commaSeparatedUsers }}, and {{ lastUser }}', {\n                commaSeparatedUsers: slicedArr.join(', '),\n                lastUser: lastUser,\n            });\n        }\n        else {\n            outStr = t('{{ commaSeparatedUsers }} and {{ moreCount }} more', {\n                commaSeparatedUsers: slicedArr.join(', '),\n                moreCount: restLength,\n            });\n        }\n    }\n    return outStr;\n};\n"]},"metadata":{},"sourceType":"module"}