{"ast":null,"code":"'use strict';\n\nconst forEach = require('ramda/src/forEach');\n\nconst find = require('ramda/src/find');\n\nconst reject = require('ramda/src/reject');\n\nconst addIndex = require('ramda/src/addIndex');\n\nconst map = require('ramda/src/map');\n\nconst HtmlParser = require('htmlparser2').Parser;\n\nconst DomHandler = require('domhandler').DomHandler;\n\nconst ProcessingInstructions = require('./processing-instructions');\n\nconst IsValidNodeDefinitions = require('./is-valid-node-definitions');\n\nconst utils = require('./utils');\n\nfunction Html2ReactParser(options) {\n  function parseHtmlToTree(html) {\n    options = options || {};\n    options.decodeEntities = true;\n    const handler = new DomHandler();\n    const parser = new HtmlParser(handler, options);\n    parser.parseComplete(html);\n    return handler.dom.filter(function (element) {\n      return element.type !== 'directive';\n    });\n  }\n\n  ;\n\n  function traverseDom(node, isValidNode, processingInstructions, preprocessingInstructions, index) {\n    if (isValidNode(node)) {\n      forEach(function (preprocessingInstruction) {\n        if (preprocessingInstruction.shouldPreprocessNode(node)) {\n          preprocessingInstruction.preprocessNode(node, index);\n        }\n      }, preprocessingInstructions || []);\n      const processingInstruction = find(function (processingInstruction) {\n        return processingInstruction.shouldProcessNode(node);\n      }, processingInstructions || []);\n\n      if (processingInstruction != null) {\n        const children = reject(function (x) {\n          return x == null || x === false;\n        }, addIndex(map)(function (child, i) {\n          return traverseDom(child, isValidNode, processingInstructions, preprocessingInstructions, i);\n        }, node.children || []));\n\n        if (processingInstruction.replaceChildren) {\n          return utils.createElement(node, index, node.data, [processingInstruction.processNode(node, children, index)]);\n        } else {\n          return processingInstruction.processNode(node, children, index);\n        }\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  ;\n\n  function parseWithInstructions(html, isValidNode, processingInstructions, preprocessingInstructions) {\n    const domTree = parseHtmlToTree(html);\n    const list = domTree.map(function (domTreeItem, index) {\n      return traverseDom(domTreeItem, isValidNode, processingInstructions, preprocessingInstructions, index);\n    });\n    return list.length <= 1 ? list[0] : list;\n  }\n\n  ;\n\n  function parse(html) {\n    const processingInstructions = new ProcessingInstructions();\n    return parseWithInstructions(html, IsValidNodeDefinitions.alwaysValid, processingInstructions.defaultProcessingInstructions);\n  }\n\n  ;\n  return {\n    parse: parse,\n    parseWithInstructions: parseWithInstructions\n  };\n}\n\n;\nmodule.exports = Html2ReactParser;","map":{"version":3,"sources":["/Users/pedrohenriquemachado/Documents/Projects/multi-tic-tac-toe/client/node_modules/html-to-react/lib/parser.js"],"names":["forEach","require","find","reject","addIndex","map","HtmlParser","Parser","DomHandler","ProcessingInstructions","IsValidNodeDefinitions","utils","Html2ReactParser","options","parseHtmlToTree","html","decodeEntities","handler","parser","parseComplete","dom","filter","element","type","traverseDom","node","isValidNode","processingInstructions","preprocessingInstructions","index","preprocessingInstruction","shouldPreprocessNode","preprocessNode","processingInstruction","shouldProcessNode","children","x","child","i","replaceChildren","createElement","data","processNode","parseWithInstructions","domTree","list","domTreeItem","length","parse","alwaysValid","defaultProcessingInstructions","module","exports"],"mappings":"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","sourcesContent":["'use strict';\nconst forEach = require('ramda/src/forEach');\nconst find = require('ramda/src/find');\nconst reject = require('ramda/src/reject');\nconst addIndex = require('ramda/src/addIndex');\nconst map = require('ramda/src/map');\nconst HtmlParser = require('htmlparser2').Parser;\nconst DomHandler = require('domhandler').DomHandler;\nconst ProcessingInstructions = require('./processing-instructions');\nconst IsValidNodeDefinitions = require('./is-valid-node-definitions');\nconst utils = require('./utils');\n\nfunction Html2ReactParser(options) {\n  function parseHtmlToTree(html) {\n    options = options || {};\n    options.decodeEntities = true;\n    const handler = new DomHandler();\n    const parser = new HtmlParser(handler, options);\n    parser.parseComplete(html);\n    return handler.dom.filter(function (element) {\n      return element.type !== 'directive';\n    });\n  };\n\n  function traverseDom(node, isValidNode, processingInstructions, preprocessingInstructions,\n    index) {\n    if (isValidNode(node)) {\n      forEach(function (preprocessingInstruction) {\n        if (preprocessingInstruction.shouldPreprocessNode(node)) {\n          preprocessingInstruction.preprocessNode(node, index);\n        }\n      }, preprocessingInstructions || []);\n\n      const processingInstruction = find(function (processingInstruction) {\n        return processingInstruction.shouldProcessNode(node);\n      }, processingInstructions || []);\n      if (processingInstruction != null) {\n        const children = reject(function (x) {return x == null || x === false;},\n          addIndex(map)(function (child, i) {\n            return traverseDom(child, isValidNode, processingInstructions,\n              preprocessingInstructions, i);\n          }, node.children || []));\n\n        if (processingInstruction.replaceChildren) {\n          return utils.createElement(node, index, node.data, [\n            processingInstruction.processNode(node, children, index),\n          ]);\n        } else {\n          return processingInstruction.processNode(node, children, index);\n        }\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n\n  function parseWithInstructions(html, isValidNode, processingInstructions,\n      preprocessingInstructions) {\n    const domTree = parseHtmlToTree(html);\n    const list = domTree.map(function (domTreeItem, index) {\n      return traverseDom(domTreeItem, isValidNode, processingInstructions,\n        preprocessingInstructions, index);\n    });\n    return list.length <= 1 ? list[0] : list;\n  };\n\n  function parse(html) {\n    const processingInstructions = new ProcessingInstructions();\n    return parseWithInstructions(html,\n      IsValidNodeDefinitions.alwaysValid,\n      processingInstructions.defaultProcessingInstructions);\n  };\n\n  return {\n    parse: parse,\n    parseWithInstructions: parseWithInstructions,\n  };\n};\n\nmodule.exports = Html2ReactParser;\n"]},"metadata":{},"sourceType":"script"}